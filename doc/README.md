# 会議休憩管理システム ドキュメント

## フォルダ概要

本プロジェクトの要件定義、実装タスク、デプロイ方法に関するドキュメントをまとめたものになります。<br>
そして、本プロジェクトの動かし方とテスト方法をまとめました。


## クイックスタート


### 1. ローカル環境を構築する

```bash
# プロジェクトルートで実行
cd os_2521

# Docker Composeで起動（ローカルサーバーを使う場合のみ、現状サーバーのデプロイ済みなのでそこからの実行も可能なので任意）
docker-compose up -d
# ヘルスチェック
curl http://localhost:8000/health

# config.jsの作成(この前にGoogleDrive記載の.envがある状態
node scripts/build-config.js
```

### 2. 拡張機能をインストールする

```bash
# Chrome で chrome://extensions/ を開く
# 「デベロッパーモード」を有効化
# 「パッケージ化されていない拡張機能を読み込む」
# extensions/leader と extensions/member を選択
```

詳細は各ディレクトリのREADMEを参照:
- [extensions/README.md](../extensions/README.md)
- [server/README.md](../server/README.md)

### 3. 動作確認する

```bash
# 1. Google Meetに参加
https://meet.google.com/

# 2. Leader拡張機能で「Start」をクリック

# 3. ブラウザの開発者ツールを開いてログを確認
# [Blink Detection] まばたき検知を開始（10HPS、1分ごとに参加者を巡回）
# [Blink Detection] 📹 参加者 3/4 を検知中
# [Blink Detection] 🔍 まばたき検知結果: ✓ 検知

# 4. まばたきが１分間で20回以上の場合、自動的に会議メンバー全員に休憩通知が表示される
```

### 4. テストコンソールを使った動作確認

Member拡張機能の休憩通知機能を手動でテストできます。

```bash
# 1. テストコンソールを開く
# test/index.html をブラウザで開く（ダブルクリックまたは右クリック→ブラウザで開く）

# 2. API URLを設定
# - ローカル環境: http://localhost:8000（デフォルト）
# - Railway環境: デプロイ先のURL

# 3. Meeting IDを入力
# - Google MeetのURLから取得（例: abc-defg-hij）
# - または、テスト用のデフォルト値を使用

# 4. テストフローを実行
# ① 「🟢 計測開始」をクリック
# ② 「☕ 休憩トリガー」をクリック → Google Meetタブで休憩通知が表示される
# ③ 「📊 状態確認」でRedisの状態を確認
# ④ 「🔴 計測終了」で終了
```

詳細は [test/README.md](../test/README.md) を参照してください。


## ドキュメント構成（審査員の方々へ開発用メモなので以下の内容/infra,/specフォルダ内、読み飛ばしてください）

### 仕様・設計 (`/spec`)

#### [requirement.md](spec/requirement.md)
要件定義書。システム全体の要件を定義しています。

- システム概要とユーザーストーリー
- まばたき検知機能の要件
- 各機能の受入基準
- 技術スタックとスコープ定義
- 成功基準

**読むべき人**: プロジェクトメンバー、システム概要を理解したい方（Googleドライブの動画も参照）

#### [design.md](spec/design.md)
設計ドキュメント。システムの技術的な設計を詳細に記述しています。

- アーキテクチャ図とコンポーネント設計
- まばたき検知アルゴリズム
- データ設計（Redis構造）とAPI仕様
- Socket.IO通信設計
- シーケンス図（休憩トリガーの流れ）
- セキュリティ設計
- フォルダ構成

**読むべき人**: 開発者

#### [tasks.md](spec/tasks.md)
タスク管理。実装タスクの一覧と進捗を管理しています。

- Phase別の実装タスク
- 各タスクのステータス（未着手/進行中/完了）
- 担当者（オプション）

**読むべき人**: 開発社

### インフラ (`/infra`)

#### [deploy.md](infra/deploy.md)
デプロイガイド。本番環境へのデプロイ方法を説明しています。

- Railwayを使った無料デプロイ手順（5分で完了）
- 環境変数設定
- Redis設定
- モニタリングとログ確認方法
- トラブルシューティング

**読むべき人**: インフラ担当、デプロイ担当者

### テスト (`/test`)

#### [test/README.md](../test/README.md)
Member拡張機能の休憩通知機能をテストするためのテストコンソール。

- テストコンソール（test/index.html）の使い方
- ローカル環境でのテスト手順
- Railwayデプロイ環境でのテスト手順
- APIエンドポイントの確認方法
- トラブルシューティング

**読むべき人**: 開発者、動作確認を行う担当者

---
